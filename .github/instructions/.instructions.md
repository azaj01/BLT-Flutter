# OWASP BLT-Flutter GitHub Copilot Instructions

This file provides guidance for GitHub Copilot when working on the OWASP BLT-Flutter mobile application.

## Project Overview

OWASP BLT (Bug Logging Tool) is a mobile application that allows users to report bugs and security issues in websites and applications. Users can:
- Browse and review existing issues
- Report new bugs
- Participate in bug hunts with prize pools
- Compete on leaderboards
- Earn points for contributions

The Flutter app is part of a larger ecosystem including:
- Main backend/API: [OWASP/BLT](https://github.com/OWASP/BLT)
- Browser extension: [OWASP/BLT-Extension](https://github.com/OWASP/BLT-Extension)
- Additional tools: BLT-Bacon, BLT-Action

## Project Structure

```
lib/
├── main.dart              # Application entry point
├── l10n/                  # Localization files
└── src/
    ├── components/        # Reusable UI components
    ├── constants/         # App-wide constants
    ├── global/            # Global state and utilities
    ├── models/            # Data models
    ├── pages/             # Screen/page widgets
    ├── providers/         # Riverpod state providers
    ├── routes/            # Navigation and routing
    └── util/              # Utility functions

test/
├── unit_tests/            # Unit tests
└── integration_tests/     # Integration tests

assets/                    # Images, icons, and static resources
```

## Technology Stack

- **Framework**: Flutter (SDK >=3.0.0 <4.0.0)
- **Language**: Dart
- **State Management**: Riverpod (flutter_riverpod ^1.0.3)
- **HTTP Client**: http package (^1.1.0)
- **Local Storage**: shared_preferences, flutter_secure_storage
- **UI Components**: Material Design, Google Fonts
- **Error Tracking**: Sentry Flutter (^8.2.0)
- **Internationalization**: flutter_localizations, intl

## Development Guidelines

### Code Style and Standards

1. **Flutter Analyze**: Always ensure code passes `flutter analyze` before submitting PRs
   - Run `flutter analyze` from the project root
   - Currently, the project has lint rules commented out due to cleanup needs
   - Fix any new issues introduced by your changes

2. **Naming Conventions**:
   - Use `snake_case` for file names (e.g., `user_profile.dart`)
   - Use `PascalCase` for class names (e.g., `UserProfile`)
   - Use `camelCase` for variables and methods (e.g., `userName`, `getUserData()`)
   - Prefix private members with underscore (e.g., `_privateMethod`)

3. **Widget Organization**:
   - Keep widgets focused and single-responsibility
   - Extract reusable components into `lib/src/components/`
   - Place screen-level widgets in `lib/src/pages/`
   - Use const constructors where possible for performance

4. **State Management**:
   - Use Riverpod for state management
   - Place providers in `lib/src/providers/`
   - Keep business logic separate from UI code
   - Use appropriate provider types (StateProvider, FutureProvider, etc.)

5. **File Organization**:
   - One main widget per file
   - Group related files in appropriate directories
   - Keep files focused and under 300-400 lines when possible

### API Integration

- Backend API documentation: Available at `/swagger/` on the main BLT domain
- Postman docs: https://documenter.getpostman.com/view/19782933/VUqpscyV
- Use the `http` package for API calls
- Handle errors gracefully with proper error messages
- Use Sentry for error tracking in production

### Asset Management

- Place images in `assets/` directory
- Register new assets in `pubspec.yaml` under `flutter.assets`
- Use `flutter_svg` for SVG images
- Use `cached_network_image` for remote images with caching

### Localization

- Support multiple languages using flutter_localizations
- Configuration in `l10n.yaml`
- Place translation files in `lib/l10n/`
- Use `Intl` package for date/time formatting

### Security Best Practices

- Store sensitive data using `flutter_secure_storage`
- Never commit API keys or secrets
- Validate user input before processing
- Use HTTPS for all network requests
- Follow OWASP Mobile Security guidelines

## Building and Testing

### Setup

1. Clone the repository:
   ```bash
   git clone https://github.com/OWASP/BLT-Flutter
   ```

2. Install dependencies:
   ```bash
   flutter pub get
   ```

3. Run the app:
   ```bash
   flutter run
   ```

### Testing

- Unit tests located in `test/unit_tests/`
- Integration tests in `test/integration_tests/`
- Run tests with: `flutter test`
- Write tests for new features and bug fixes
- Follow existing test patterns

### Building

- Build for Android: `flutter build apk`
- Build for iOS: `flutter build ios`
- CI/CD configured with Codemagic (see `codemagic.yaml`)
- GitHub Actions workflows in `.github/workflows/`

### Platform Support

The app supports:
- Android
- iOS
- Linux
- macOS
- Windows (experimental)

Platform-specific code in respective directories.

## Dependencies Management

- List dependencies in `pubspec.yaml`
- Run `flutter pub get` after adding dependencies
- Keep dependencies up to date but test thoroughly
- Check for security vulnerabilities in dependencies
- Dependabot configured for automatic updates

## UI/UX Guidelines

- Follow Material Design principles
- Use Google Fonts as configured in the project
- Refer to Figma designs: https://www.figma.com/file/uCd2HxU2Hvbcl01Gv2vUU1/Bug-Logging-Tool-(with-dark-theme)
- Support both light and dark themes
- Ensure responsive layouts for different screen sizes
- Use `lottie` for animations where appropriate

## Contributing Workflow

1. Check existing issues before starting work
2. Comment "assign to me" or "/assign" on an issue to get assigned
3. Create a new branch through GitHub on the issue page
4. Make focused, minimal changes
5. Run `flutter analyze` before committing
6. Write or update tests as needed
7. Submit a PR with clear description
8. Reference the issue number in PR description

## Common Tasks

### Adding a New Screen

1. Create widget file in `lib/src/pages/`
2. Define route in `lib/src/routes/`
3. Add navigation logic where needed
4. Create corresponding provider if state management needed
5. Add tests in `test/`

### Adding a New Component

1. Create component in `lib/src/components/`
2. Make it reusable and configurable
3. Use const constructors where possible
4. Document parameters with comments
5. Add example usage in comments

### Integrating a New API Endpoint

1. Define model in `lib/src/models/`
2. Create API service method
3. Handle response parsing and errors
4. Create provider for state management
5. Update UI to consume the data

### Adding Dependencies

1. Add to `pubspec.yaml` under appropriate section
2. Run `flutter pub get`
3. Import in needed files
4. Update documentation if significant

## Resources

- **OWASP Slack**: Join #project-blt channel for questions
- **GitHub Activity**: Monitor #blt-github channel
- **Flutter Docs**: https://flutter.dev/docs
- **Dart Docs**: https://dart.dev/guides
- **Riverpod Docs**: https://riverpod.dev

## Key Considerations

- **Performance**: Use const constructors, avoid unnecessary rebuilds
- **Accessibility**: Ensure proper semantic labels and contrast ratios
- **Internationalization**: Support multiple languages from the start
- **Error Handling**: Provide clear, actionable error messages
- **User Experience**: Keep the UI intuitive and responsive
- **Code Quality**: Maintain readability and maintainability
- **Security**: Follow OWASP Mobile Security best practices

## Notes for Copilot

When working on this repository:
- Prioritize minimal, surgical changes
- Maintain consistency with existing code style
- Respect the Flutter/Dart conventions
- Ensure changes don't break existing functionality
- Run `flutter analyze` to validate code quality
- Follow the contribution guidelines
- Reference API documentation when working with backend integration
- Keep security best practices in mind
- Test changes thoroughly before submitting
